<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>åšå®¢ç¼–è¾‘å™¨å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½è®¾ç½®è¯´æ˜ - xiahuibb&#39;s blog</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/post.css">
<meta name="generator" content="Hexo 7.3.0"></head>
<body class="post-page">
  <link rel="stylesheet" href="/css/header.css" />
<link rel="stylesheet" href="/css/down.css" />

<!-- <header class="site-header"> -->
<header class="header">
  <div class="header-container">
    <div class="header-left">
      <img src="/images/æ·˜å®åº—é“ºå¿§å¿§ç´ æåº“ (981).gif" alt="Logo" class="header-logo" />
  <span class="header-title">xiahuibb&#39;s blog</span>
   </div>
    <!-- ä¸­é—´çš„ç®­å¤´æŒ‰é’® -->
    <div class="header-center">
      <button id="dropdown-toggle" aria-haspopup="true" aria-expanded="false" aria-controls="dropdown-content" class="dropdown-btn" aria-label="Toggle dropdown">
      <svg viewBox="0 0 64 64" width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="sun-icon">
        <g class="sun-rays">
          <line x1="32" y1="4" x2="32" y2="14" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
          <line x1="32" y1="50" x2="32" y2="60" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
          <line x1="4" y1="32" x2="14" y2="32" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
          <line x1="50" y1="32" x2="60" y2="32" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
          <line x1="12" y1="12" x2="19" y2="19" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
          <line x1="45" y1="45" x2="52" y2="52" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
          <line x1="12" y1="52" x2="19" y2="45" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
          <line x1="45" y1="19" x2="52" y2="12" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
        </g>
        <circle cx="32" cy="32" r="12" fill="#FFD93B" stroke="#FFB800" stroke-width="3"/>
      </svg>
    </button>

    </div>

    <nav class="header-nav">
      <ul class="header-menu">
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/archives">Archives</a></li>
        
          <li><a href="/editor">Editor</a></li>
        
      </ul>
    </nav>
  </div>
</header>
<!-- ä¸‹æ‹‰å†…å®¹æ”¾åœ¨ header å¤–ï¼Œé¿å…è¢« header å›ºå®šé«˜åº¦é™åˆ¶ -->
<div id="dropdown-content" class="dropdown-content" aria-hidden="true" >
  <div class="dropdown-inner">
      <div id="calendar"></div>
  </div>
</div>

<!-- Blog æ—¥æœŸ JSON æ•°æ® -->
<script id="blogDates" type="application/json">
  ["2025-06-25","2025-06-26","2025-07-01","2025-07-02","2025-07-03","2025-08-18","2025-08-18","2025-08-25","2025-08-26","2025-08-31","2025-09-03","2025-09-06","2025-09-07","2025-09-06","2025-09-06","2025-09-07","2025-09-07","2025-06-25"]
</script>
  <script>
    const blogDates = JSON.parse(document.getElementById('blogDates').textContent);
    console.log('åšå®¢æ–‡ç« æ—¥æœŸ:', blogDates);
  </script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
  const toggleBtn = document.getElementById('dropdown-toggle');
  const dropdownContent = document.getElementById('dropdown-content');
  const sunRays = toggleBtn.querySelector('.sun-rays');

  let isExpanded = false;

  toggleBtn.addEventListener('click', () => {
    if (isExpanded) {
      // æ’­æ”¾å¤ªé˜³æ”¶èµ·åŠ¨ç”»
      sunRays.style.animation = 'rays-collapse 0.4s forwards ease-in';

      // å…ˆå°† max-height è®¾ç½®ä¸ºå½“å‰å†…å®¹é«˜åº¦ï¼Œç¡®ä¿è¿‡æ¸¡ä»æ­£ç¡®é«˜åº¦å¼€å§‹
      dropdownContent.style.maxHeight = dropdownContent.scrollHeight + 'px';

      // è§¦å‘é‡ç»˜ï¼Œç¡®ä¿æµè§ˆå™¨è¯†åˆ«æ–°çš„ max-height
      dropdownContent.offsetHeight;

      // å»¶è¿Ÿè®¾ç½® max-height ä¸º0ï¼Œè§¦å‘è¿‡æ¸¡åŠ¨ç”»
      setTimeout(() => {
        dropdownContent.style.maxHeight = '0';
        dropdownContent.style.opacity = '0';
        dropdownContent.style.pointerEvents = 'none';
      }, 20); // 20ms çš„å»¶è¿Ÿè¶³å¤Ÿè§¦å‘åŠ¨ç”»

      toggleBtn.classList.remove('active');
      toggleBtn.setAttribute('aria-expanded', 'false');
      dropdownContent.setAttribute('aria-hidden', 'true');
      isExpanded = false;

    } else {
      // æ’­æ”¾å¤ªé˜³å±•å¼€åŠ¨ç”»
      sunRays.style.animation = 'rays-expand 0.4s forwards ease-out';

      dropdownContent.style.opacity = '1';
      dropdownContent.style.pointerEvents = 'auto';

      // ç›´æ¥è®¾ç½® max-height ä¸ºå†…å®¹é«˜åº¦ï¼Œè§¦å‘å±•å¼€åŠ¨ç”»
      dropdownContent.style.maxHeight = dropdownContent.scrollHeight + 'px';

      toggleBtn.classList.add('active');
      toggleBtn.setAttribute('aria-expanded', 'true');
      dropdownContent.setAttribute('aria-hidden', 'false');
      isExpanded = true;
    }
  });

  // ç‚¹å‡»å¤–éƒ¨å…³é—­ä¸‹æ‹‰æ¡†
  document.addEventListener('click', (e) => {
    if (!toggleBtn.contains(e.target) && !dropdownContent.contains(e.target) && isExpanded) {
      sunRays.style.animation = 'rays-collapse 0.4s forwards ease-in';

      dropdownContent.style.maxHeight = dropdownContent.scrollHeight + 'px';
      dropdownContent.offsetHeight;

      setTimeout(() => {
        dropdownContent.style.maxHeight = '0';
        dropdownContent.style.opacity = '0';
        dropdownContent.style.pointerEvents = 'none';
      }, 20);

      toggleBtn.classList.remove('active');
      toggleBtn.setAttribute('aria-expanded', 'false');
      dropdownContent.setAttribute('aria-hidden', 'true');
      isExpanded = false;
    }
  });

  sunRays.addEventListener('animationend', (e) => {
    if (e.animationName === 'rays-collapse') {
      sunRays.style.animation = '';
      sunRays.style.transform = 'scale(0)';
      sunRays.style.opacity = '0';
    } else if (e.animationName === 'rays-expand') {
      sunRays.style.animation = '';
      sunRays.style.transform = 'scale(1)';
      sunRays.style.opacity = '1';
    }
  });
});




// ...existing code...

let currentYear, currentMonth;

function renderCalendar(year, month, highlightDates) {
  currentYear = year;
  currentMonth = month;
  const calendarEl = document.getElementById('calendar');
  calendarEl.innerHTML = ''; // æ¸…ç©º

  // æ—¥å†å¤´éƒ¨
  const headerDiv = document.createElement('div');
  headerDiv.className = 'calendar-header';
  headerDiv.style.display = 'flex';
  headerDiv.style.justifyContent = 'center';
  headerDiv.style.alignItems = 'center';
  headerDiv.style.marginBottom = '8px';
  headerDiv.innerHTML = `
    <button class="calendar-btn" id="prev-year" title="ä¸Šä¸€å¹´">&laquo;</button>
    <button class="calendar-btn" id="prev-month" title="ä¸Šä¸€æœˆ">&lsaquo;</button>
    <span class="calendar-title" style="margin: 0 12px; font-weight: bold;">
      ${year}å¹´${month + 1}æœˆ
    </span>
    <button class="calendar-btn" id="next-month" title="ä¸‹ä¸€æœˆ">&rsaquo;</button>
    <button class="calendar-btn" id="next-year" title="ä¸‹ä¸€å¹´">&raquo;</button>
  `;
  calendarEl.appendChild(headerDiv);

  // ...åŸæœ‰è¡¨æ ¼ç”Ÿæˆä»£ç ...
  const daysOfWeek = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
  const firstDay = new Date(year, month, 1);
  const lastDay = new Date(year, month + 1, 0);
  const firstWeekDay = firstDay.getDay();
  const totalDays = lastDay.getDate();

  const table = document.createElement('table');
  table.className = 'calendar-table';

  const thead = document.createElement('thead');
  const headerRow = document.createElement('tr');
  daysOfWeek.forEach(d => {
    const th = document.createElement('th');
    th.textContent = d;
    headerRow.appendChild(th);
  });
  thead.appendChild(headerRow);
  table.appendChild(thead);

  const tbody = document.createElement('tbody');
  let row = document.createElement('tr');
  for (let i = 0; i < firstWeekDay; i++) {
    row.appendChild(document.createElement('td'));
  }
  for (let day = 1; day <= totalDays; day++) {
    if (row.children.length % 7 === 0) {
      tbody.appendChild(row);
      row = document.createElement('tr');
    }
    const td = document.createElement('td');
    td.textContent = day;
    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
    if (highlightDates.includes(dateStr)) {
      td.classList.add('highlight');
    }
    row.appendChild(td);
  }
  while (row.children.length < 7) {
    row.appendChild(document.createElement('td'));
  }
  tbody.appendChild(row);
  table.appendChild(tbody);
  calendarEl.appendChild(table);

  // äº‹ä»¶ç»‘å®š
  document.getElementById('prev-year').onclick = () => renderCalendar(year - 1, month, highlightDates);
  document.getElementById('next-year').onclick = () => renderCalendar(year + 1, month, highlightDates);
  document.getElementById('prev-month').onclick = () => {
    if (month === 0) {
      renderCalendar(year - 1, 11, highlightDates);
    } else {
      renderCalendar(year, month - 1, highlightDates);
    }
  };
  document.getElementById('next-month').onclick = () => {
    if (month === 11) {
      renderCalendar(year + 1, 0, highlightDates);
    } else {
      renderCalendar(year, month + 1, highlightDates);
    }
  };
}

// é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', () => {
  const now = new Date();
  renderCalendar(now.getFullYear(), now.getMonth(), blogDates);
  document.querySelector('.dropdown-inner').addEventListener('click', function(e) {
    e.stopPropagation();
  });
});

</script>

  
  <!-- ç¼–è¾‘æ¨¡å¼åˆ‡æ¢æŒ‰é’® -->
  <div class="post-controls">
    <button id="toggle-edit" class="btn-edit-toggle" title="åˆ‡æ¢ç¼–è¾‘æ¨¡å¼">
      <span class="edit-icon">âœï¸</span>
      <span class="edit-text">ç¼–è¾‘</span>
    </button>
    <button id="save-post" class="btn-save-post" style="display: none;" title="ä¿å­˜æ–‡ç« ">
      <span class="save-icon">ğŸ’¾</span>
      <span class="save-text">ä¿å­˜</span>
    </button>
  </div>

  <main class="container">
    <aside class="toc">
      <div class="toc-content">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%9A%E5%AE%A2%E7%BC%96%E8%BE%91%E5%99%A8%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E5%8A%9F%E8%83%BD%E8%AE%BE%E7%BD%AE%E8%AF%B4%E6%98%8E"><span class="toc-number">1.</span> <span class="toc-text">åšå®¢ç¼–è¾‘å™¨å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½è®¾ç½®è¯´æ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E5%AE%89%E8%A3%85"><span class="toc-number">1.1.</span> <span class="toc-text">ä¾èµ–å®‰è£…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF%E9%9B%86%E6%88%90"><span class="toc-number">1.2.</span> <span class="toc-text">åç«¯é›†æˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E8%B7%AF%E7%94%B1%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. åˆ›å»ºå›¾ç‰‡ä¸Šä¼ è·¯ç”±æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9C%A8%E4%B8%BB%E5%BA%94%E7%94%A8%E4%B8%AD%E5%BC%95%E5%85%A5%E8%B7%AF%E7%94%B1"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥è·¯ç”±</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%A1%AE%E4%BF%9D%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. ç¡®ä¿ç›®å½•ç»“æ„</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E9%9B%86%E6%88%90"><span class="toc-number">1.3.</span> <span class="toc-text">å‰ç«¯é›†æˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%9B%B4%E6%96%B0%E7%BC%96%E8%BE%91%E5%99%A8JavaScript"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. æ›´æ–°ç¼–è¾‘å™¨JavaScript</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%A1%AE%E4%BF%9D%E7%BC%96%E8%BE%91%E5%99%A8%E9%A1%B5%E9%9D%A2%E5%BC%95%E5%85%A5%E4%BA%86%E5%BF%85%E8%A6%81%E7%9A%84%E5%BA%93"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. ç¡®ä¿ç¼–è¾‘å™¨é¡µé¢å¼•å…¥äº†å¿…è¦çš„åº“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E7%89%B9%E6%80%A7"><span class="toc-number">1.4.</span> <span class="toc-text">åŠŸèƒ½ç‰¹æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%94%AF%E6%8C%81%E7%9A%84%E4%B8%8A%E4%BC%A0%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.1.</span> <span class="toc-text">æ”¯æŒçš„ä¸Šä¼ æ–¹å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%B7%AF%E5%BE%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.4.2.</span> <span class="toc-text">å­˜å‚¨è·¯å¾„æ ¼å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E7%89%B9%E6%80%A7"><span class="toc-number">1.4.3.</span> <span class="toc-text">å®‰å…¨ç‰¹æ€§</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9"><span class="toc-number">1.5.</span> <span class="toc-text">é…ç½®é€‰é¡¹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E4%B8%8A%E4%BC%A0%E9%99%90%E5%88%B6"><span class="toc-number">1.5.1.</span> <span class="toc-text">ä¿®æ”¹ä¸Šä¼ é™åˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%85%81%E8%AE%B8%E7%9A%84%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.5.2.</span> <span class="toc-text">ä¿®æ”¹å…è®¸çš„æ–‡ä»¶ç±»å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9Token%E9%AA%8C%E8%AF%81"><span class="toc-number">1.5.3.</span> <span class="toc-text">ä¿®æ”¹TokenéªŒè¯</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">1.6.</span> <span class="toc-text">ä½¿ç”¨æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4"><span class="toc-number">1.7.</span> <span class="toc-text">æ•…éšœæ’é™¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="toc-number">1.7.1.</span> <span class="toc-text">å¸¸è§é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E"><span class="toc-number">1.8.</span> <span class="toc-text">APIæ¥å£è¯´æ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E5%8D%95%E5%BC%A0%E5%9B%BE%E7%89%87"><span class="toc-number">1.8.1.</span> <span class="toc-text">ä¸Šä¼ å•å¼ å›¾ç‰‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87"><span class="toc-number">1.8.2.</span> <span class="toc-text">æ‰¹é‡ä¸Šä¼ å›¾ç‰‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%9B%BE%E7%89%87"><span class="toc-number">1.8.3.</span> <span class="toc-text">åˆ é™¤å›¾ç‰‡</span></a></li></ol></li></ol></li></ol>
      </div>
    </aside>
    
    <section class="content">
      <!-- æ–‡ç« å…ƒä¿¡æ¯ç¼–è¾‘åŒº -->
      <div class="post-meta-edit" id="post-meta-edit" style="display: none;">
        <div class="meta-grid">
          <div class="meta-item">
            <label for="edit-title">æ ‡é¢˜</label>
            <input type="text" id="edit-title" value="åšå®¢ç¼–è¾‘å™¨å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½è®¾ç½®è¯´æ˜" placeholder="æ–‡ç« æ ‡é¢˜">
          </div>
          
          <div class="meta-item">
            <label for="edit-date">å‘å¸ƒæ—¥æœŸ</label>
            <input type="datetime-local" id="edit-date" value="2025-09-06T16:00">
          </div>
          
          <div class="meta-item">
            <label for="edit-categories">åˆ†ç±»</label>
            <input type="text" id="edit-categories" value="undefined" placeholder="åˆ†ç±»1, åˆ†ç±»2...">
          </div>
          
          <div class="meta-item">
            <label for="edit-tags">æ ‡ç­¾</label>
            <input type="text" id="edit-tags" value="undefined" placeholder="æ ‡ç­¾1, æ ‡ç­¾2...">
          </div>
          
          <div class="meta-item meta-item-full">
            <label for="edit-thumbnail">ç¼©ç•¥å›¾</label>
            <input type="text" id="edit-thumbnail" value="" placeholder="å›¾ç‰‡URLï¼ˆå¯é€‰ï¼‰">
          </div>
        </div>
      </div>

      <!-- ç¼–è¾‘å·¥å…·æ  -->
      <div class="edit-toolbar" id="edit-toolbar" style="display: none;">
        <div class="toolbar-group">
          <button type="button" class="toolbar-btn" data-action="bold" title="ç²—ä½“ (Ctrl+B)">
            <strong>B</strong>
          </button>
          <button type="button" class="toolbar-btn" data-action="italic" title="æ–œä½“ (Ctrl+I)">
            <em>I</em>
          </button>
          <button type="button" class="toolbar-btn" data-action="code" title="è¡Œå†…ä»£ç ">
            &lt;/&gt;
          </button>
        </div>
        
        <div class="toolbar-group">
          <button type="button" class="toolbar-btn" data-action="heading1" title="æ ‡é¢˜1">H1</button>
          <button type="button" class="toolbar-btn" data-action="heading2" title="æ ‡é¢˜2">H2</button>
          <button type="button" class="toolbar-btn" data-action="heading3" title="æ ‡é¢˜3">H3</button>
        </div>
        
        <div class="toolbar-group">
          <button type="button" class="toolbar-btn" data-action="link" title="æ’å…¥é“¾æ¥">ğŸ”—</button>
          <button type="button" class="toolbar-btn" data-action="image" title="æ’å…¥å›¾ç‰‡">ğŸ–¼ï¸</button>
          <input type="file" id="image-upload" accept="image/*" style="display: none;" multiple>
        </div>
        
        <div class="toolbar-group">
          <button type="button" class="toolbar-btn" data-action="quote" title="å¼•ç”¨">â</button>
          <button type="button" class="toolbar-btn" data-action="list" title="åˆ—è¡¨">â€¢</button>
          <button type="button" class="toolbar-btn" data-action="codeblock" title="ä»£ç å—">{ }</button>
        </div>
        
        <div class="toolbar-group">
          <button type="button" class="toolbar-btn toggle-preview" data-action="preview" title="é¢„è§ˆ">ğŸ‘ï¸</button>
        </div>
      </div>

      <!-- æ–‡ç« å†…å®¹æ˜¾ç¤ºåŒº -->
      <article class="post-content" id="post-content">
        <h1 id="åšå®¢ç¼–è¾‘å™¨å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½è®¾ç½®è¯´æ˜"><a href="#åšå®¢ç¼–è¾‘å™¨å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½è®¾ç½®è¯´æ˜" class="headerlink" title="åšå®¢ç¼–è¾‘å™¨å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½è®¾ç½®è¯´æ˜"></a>åšå®¢ç¼–è¾‘å™¨å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½è®¾ç½®è¯´æ˜</h1><h2 id="ä¾èµ–å®‰è£…"><a href="#ä¾èµ–å®‰è£…" class="headerlink" title="ä¾èµ–å®‰è£…"></a>ä¾èµ–å®‰è£…</h2><p>é¦–å…ˆå®‰è£…å¿…è¦çš„npmåŒ…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install multer</span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¿˜æ²¡æœ‰å®‰è£…å…¶ä»–ä¾èµ–ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express cors body-parser</span><br></pre></td></tr></table></figure>

<h2 id="åç«¯é›†æˆ"><a href="#åç«¯é›†æˆ" class="headerlink" title="åç«¯é›†æˆ"></a>åç«¯é›†æˆ</h2><h3 id="1-åˆ›å»ºå›¾ç‰‡ä¸Šä¼ è·¯ç”±æ–‡ä»¶"><a href="#1-åˆ›å»ºå›¾ç‰‡ä¸Šä¼ è·¯ç”±æ–‡ä»¶" class="headerlink" title="1. åˆ›å»ºå›¾ç‰‡ä¸Šä¼ è·¯ç”±æ–‡ä»¶"></a>1. åˆ›å»ºå›¾ç‰‡ä¸Šä¼ è·¯ç”±æ–‡ä»¶</h3><p>å°†æä¾›çš„APIä»£ç ä¿å­˜ä¸º <code>routes/image-upload.js</code>ï¼ˆæˆ–å…¶ä»–åˆé€‚çš„ä½ç½®ï¼‰</p>
<h3 id="2-åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥è·¯ç”±"><a href="#2-åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥è·¯ç”±" class="headerlink" title="2. åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥è·¯ç”±"></a>2. åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥è·¯ç”±</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js æˆ– server.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> imageRoutes = <span class="built_in">require</span>(<span class="string">&#x27;./routes/image-upload&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>());</span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">&#x27;public&#x27;</span>)); <span class="comment">// ç¡®ä¿é™æ€æ–‡ä»¶æœåŠ¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å›¾ç‰‡ä¸Šä¼ APIè·¯ç”±</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api&#x27;</span>, imageRoutes);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¶ä»–è·¯ç”±...</span></span><br></pre></td></tr></table></figure>

<h3 id="3-ç¡®ä¿ç›®å½•ç»“æ„"><a href="#3-ç¡®ä¿ç›®å½•ç»“æ„" class="headerlink" title="3. ç¡®ä¿ç›®å½•ç»“æ„"></a>3. ç¡®ä¿ç›®å½•ç»“æ„</h3><p>ç¡®ä¿ä½ çš„é¡¹ç›®æœ‰ä»¥ä¸‹ç›®å½•ç»“æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">your-project/</span><br><span class="line">â”œâ”€â”€ public/</span><br><span class="line">â”‚   â””â”€â”€ images/        # å›¾ç‰‡å­˜å‚¨ç›®å½•ï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºå­ç›®å½•ï¼‰</span><br><span class="line">â”œâ”€â”€ routes/</span><br><span class="line">â”‚   â””â”€â”€ image-upload.js</span><br><span class="line">â””â”€â”€ app.js</span><br></pre></td></tr></table></figure>

<h2 id="å‰ç«¯é›†æˆ"><a href="#å‰ç«¯é›†æˆ" class="headerlink" title="å‰ç«¯é›†æˆ"></a>å‰ç«¯é›†æˆ</h2><h3 id="1-æ›´æ–°ç¼–è¾‘å™¨JavaScript"><a href="#1-æ›´æ–°ç¼–è¾‘å™¨JavaScript" class="headerlink" title="1. æ›´æ–°ç¼–è¾‘å™¨JavaScript"></a>1. æ›´æ–°ç¼–è¾‘å™¨JavaScript</h3><p>å°†å¢å¼ºçš„ <code>editor.js</code> ä»£ç æ›¿æ¢ä½ ç°æœ‰çš„ç¼–è¾‘å™¨è„šæœ¬ã€‚</p>
<h3 id="2-ç¡®ä¿ç¼–è¾‘å™¨é¡µé¢å¼•å…¥äº†å¿…è¦çš„åº“"><a href="#2-ç¡®ä¿ç¼–è¾‘å™¨é¡µé¢å¼•å…¥äº†å¿…è¦çš„åº“" class="headerlink" title="2. ç¡®ä¿ç¼–è¾‘å™¨é¡µé¢å¼•å…¥äº†å¿…è¦çš„åº“"></a>2. ç¡®ä¿ç¼–è¾‘å™¨é¡µé¢å¼•å…¥äº†å¿…è¦çš„åº“</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/marked@4.2.12/marked.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/js/editor.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="åŠŸèƒ½ç‰¹æ€§"><a href="#åŠŸèƒ½ç‰¹æ€§" class="headerlink" title="åŠŸèƒ½ç‰¹æ€§"></a>åŠŸèƒ½ç‰¹æ€§</h2><h3 id="æ”¯æŒçš„ä¸Šä¼ æ–¹å¼"><a href="#æ”¯æŒçš„ä¸Šä¼ æ–¹å¼" class="headerlink" title="æ”¯æŒçš„ä¸Šä¼ æ–¹å¼"></a>æ”¯æŒçš„ä¸Šä¼ æ–¹å¼</h3><ol>
<li><strong>ç‚¹å‡»ä¸Šä¼ æŒ‰é’®</strong> - é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªå›¾ç‰‡æ–‡ä»¶</li>
<li><strong>æ‹–æ‹½ä¸Šä¼ </strong> - ç›´æ¥å°†å›¾ç‰‡æ‹–åˆ°ç¼–è¾‘å™¨åŒºåŸŸ</li>
<li><strong>ç²˜è´´ä¸Šä¼ </strong> - Ctrl+V ç²˜è´´å‰ªè´´æ¿ä¸­çš„å›¾ç‰‡</li>
</ol>
<h3 id="å­˜å‚¨è·¯å¾„æ ¼å¼"><a href="#å­˜å‚¨è·¯å¾„æ ¼å¼" class="headerlink" title="å­˜å‚¨è·¯å¾„æ ¼å¼"></a>å­˜å‚¨è·¯å¾„æ ¼å¼</h3><p>å›¾ç‰‡ä¼šæŒ‰ç…§ä»¥ä¸‹æ ¼å¼ä¿å­˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/images/å¹´/æœˆ/åšå®¢æ ‡é¢˜/å›¾ç‰‡æ–‡ä»¶å</span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>åšå®¢æ ‡é¢˜ï¼š<code>æˆ‘çš„Vueå­¦ä¹ ç¬”è®°</code></li>
<li>ä¸Šä¼ æ—¶é—´ï¼š2024å¹´3æœˆ</li>
<li>å­˜å‚¨è·¯å¾„ï¼š<code>/images/2024/03/æˆ‘çš„vueå­¦ä¹ ç¬”è®°/1710123456789-a1b2c3d4.jpg</code></li>
</ul>
<h3 id="å®‰å…¨ç‰¹æ€§"><a href="#å®‰å…¨ç‰¹æ€§" class="headerlink" title="å®‰å…¨ç‰¹æ€§"></a>å®‰å…¨ç‰¹æ€§</h3><ul>
<li><strong>æ–‡ä»¶ç±»å‹éªŒè¯</strong> - åªå…è®¸å›¾ç‰‡æ ¼å¼</li>
<li><strong>æ–‡ä»¶å¤§å°é™åˆ¶</strong> - æœ€å¤§10MB</li>
<li><strong>è·¯å¾„å®‰å…¨</strong> - é˜²æ­¢ç›®å½•éå†æ”»å‡»</li>
<li><strong>æ–‡ä»¶åå®‰å…¨</strong> - è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ã€å®‰å…¨çš„æ–‡ä»¶å</li>
<li><strong>èº«ä»½éªŒè¯</strong> - éœ€è¦æœ‰æ•ˆtokenæ‰èƒ½ä¸Šä¼ </li>
</ul>
<h2 id="é…ç½®é€‰é¡¹"><a href="#é…ç½®é€‰é¡¹" class="headerlink" title="é…ç½®é€‰é¡¹"></a>é…ç½®é€‰é¡¹</h2><h3 id="ä¿®æ”¹ä¸Šä¼ é™åˆ¶"><a href="#ä¿®æ”¹ä¸Šä¼ é™åˆ¶" class="headerlink" title="ä¿®æ”¹ä¸Šä¼ é™åˆ¶"></a>ä¿®æ”¹ä¸Šä¼ é™åˆ¶</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> upload = <span class="title function_">multer</span>(&#123;</span><br><span class="line">  <span class="attr">storage</span>: storage,</span><br><span class="line">  <span class="attr">limits</span>: &#123;</span><br><span class="line">    <span class="attr">fileSize</span>: <span class="number">5</span> * <span class="number">1024</span> * <span class="number">1024</span>, <span class="comment">// æ”¹ä¸º5MB</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="ä¿®æ”¹å…è®¸çš„æ–‡ä»¶ç±»å‹"><a href="#ä¿®æ”¹å…è®¸çš„æ–‡ä»¶ç±»å‹" class="headerlink" title="ä¿®æ”¹å…è®¸çš„æ–‡ä»¶ç±»å‹"></a>ä¿®æ”¹å…è®¸çš„æ–‡ä»¶ç±»å‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">fileFilter</span>: <span class="function">(<span class="params">req, file, cb</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> allowedTypes = <span class="regexp">/jpeg|jpg|png|gif|webp|svg/</span>; <span class="comment">// æ·»åŠ svgæ”¯æŒ</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¿®æ”¹TokenéªŒè¯"><a href="#ä¿®æ”¹TokenéªŒè¯" class="headerlink" title="ä¿®æ”¹TokenéªŒè¯"></a>ä¿®æ”¹TokenéªŒè¯</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨å‰ç«¯ editor.js ä¸­</span></span><br><span class="line"><span class="keyword">const</span> token = <span class="string">&#x27;your-actual-secret-token&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨åç«¯ image-upload.js ä¸­</span></span><br><span class="line"><span class="keyword">if</span> (token !== <span class="string">&#x27;your-actual-secret-token&#x27;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">403</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;æ— æ•ˆçš„è®¿é—®ä»¤ç‰Œ&#x27;</span> &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><ol>
<li><p><strong>ç¼–å†™åšå®¢æ—¶</strong>ï¼š</p>
<ul>
<li>å…ˆè¾“å…¥åšå®¢æ ‡é¢˜</li>
<li>ç‚¹å‡»â€ä¸Šä¼ å›¾ç‰‡â€æŒ‰é’®é€‰æ‹©å›¾ç‰‡</li>
<li>æˆ–è€…ç›´æ¥æ‹–æ‹½å›¾ç‰‡åˆ°ç¼–è¾‘å™¨</li>
<li>æˆ–è€…å¤åˆ¶å›¾ç‰‡ååœ¨ç¼–è¾‘å™¨ä¸­ç²˜è´´</li>
</ul>
</li>
<li><p><strong>å›¾ç‰‡ä¼šè‡ªåŠ¨æ’å…¥Markdownæ ¼å¼</strong>ï¼š</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">å›¾ç‰‡åç§°</span>](<span class="link">/images/2024/03/åšå®¢æ ‡é¢˜/æ–‡ä»¶å.jpg</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å®æ—¶é¢„è§ˆ</strong>ï¼š</p>
<ul>
<li>å³ä¾§é¢„è§ˆåŒºåŸŸä¼šç«‹å³æ˜¾ç¤ºä¸Šä¼ çš„å›¾ç‰‡</li>
</ul>
</li>
</ol>
<h2 id="æ•…éšœæ’é™¤"><a href="#æ•…éšœæ’é™¤" class="headerlink" title="æ•…éšœæ’é™¤"></a>æ•…éšœæ’é™¤</h2><h3 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h3><ol>
<li><p><strong>ä¸Šä¼ å¤±è´¥</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥æ–‡ä»¶å¤§å°æ˜¯å¦è¶…è¿‡é™åˆ¶</li>
<li>ç¡®è®¤æ–‡ä»¶ç±»å‹æ˜¯å¦æ”¯æŒ</li>
<li>éªŒè¯tokenæ˜¯å¦æ­£ç¡®</li>
</ul>
</li>
<li><p><strong>å›¾ç‰‡æ˜¾ç¤ºä¸å‡ºæ¥</strong>ï¼š</p>
<ul>
<li>ç¡®è®¤ <code>public</code> ç›®å½•çš„é™æ€æ–‡ä»¶æœåŠ¡å·²é…ç½®</li>
<li>æ£€æŸ¥å›¾ç‰‡æ–‡ä»¶æ˜¯å¦æˆåŠŸä¿å­˜</li>
<li>ç¡®è®¤è·¯å¾„æ ¼å¼æ­£ç¡®</li>
</ul>
</li>
<li><p><strong>æƒé™é”™è¯¯</strong>ï¼š</p>
<ul>
<li>ç¡®ä¿Node.jsè¿›ç¨‹æœ‰å†™å…¥ <code>public/images</code> ç›®å½•çš„æƒé™</li>
<li>åœ¨Linux&#x2F;Macä¸Šå¯èƒ½éœ€è¦ï¼š<code>chmod 755 public/images</code></li>
</ul>
</li>
</ol>
<h2 id="APIæ¥å£è¯´æ˜"><a href="#APIæ¥å£è¯´æ˜" class="headerlink" title="APIæ¥å£è¯´æ˜"></a>APIæ¥å£è¯´æ˜</h2><h3 id="ä¸Šä¼ å•å¼ å›¾ç‰‡"><a href="#ä¸Šä¼ å•å¼ å›¾ç‰‡" class="headerlink" title="ä¸Šä¼ å•å¼ å›¾ç‰‡"></a>ä¸Šä¼ å•å¼ å›¾ç‰‡</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST /api/upload-image</span><br><span class="line"><span class="attribute">Authorization</span><span class="punctuation">: </span>Bearer your-token</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>multipart/form-data</span><br><span class="line"></span><br><span class="line"><span class="attribute">FormData</span>:</span><br><span class="line">- image: å›¾ç‰‡æ–‡ä»¶</span><br><span class="line">- blogTitle: åšå®¢æ ‡é¢˜</span><br></pre></td></tr></table></figure>

<h3 id="æ‰¹é‡ä¸Šä¼ å›¾ç‰‡"><a href="#æ‰¹é‡ä¸Šä¼ å›¾ç‰‡" class="headerlink" title="æ‰¹é‡ä¸Šä¼ å›¾ç‰‡"></a>æ‰¹é‡ä¸Šä¼ å›¾ç‰‡</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST /api/upload-images</span><br><span class="line"><span class="attribute">Authorization</span><span class="punctuation">: </span>Bearer your-token</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>multipart/form-data</span><br><span class="line"></span><br><span class="line"><span class="attribute">FormData</span>:</span><br><span class="line">- images: å›¾ç‰‡æ–‡ä»¶æ•°ç»„ï¼ˆæœ€å¤š10ä¸ªï¼‰</span><br><span class="line">- blogTitle: åšå®¢æ ‡é¢˜</span><br></pre></td></tr></table></figure>

<h3 id="åˆ é™¤å›¾ç‰‡"><a href="#åˆ é™¤å›¾ç‰‡" class="headerlink" title="åˆ é™¤å›¾ç‰‡"></a>åˆ é™¤å›¾ç‰‡</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DELETE /api/delete-image</span><br><span class="line"><span class="attribute">Authorization</span><span class="punctuation">: </span>Bearer your-token</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;imagePath&quot;: &quot;images/2024/03/blog-title/filename.jpg&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      </article>

      <!-- ç¼–è¾‘å™¨ -->
      <div class="post-editor" id="post-editor" style="display: none;">
        <div class="editor-container">
          <textarea id="markdown-editor" class="markdown-textarea" placeholder="å¼€å§‹ç¼–è¾‘ä½ çš„æ–‡ç« ...">---
title: åšå®¢ç¼–è¾‘å™¨å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½è®¾ç½®è¯´æ˜
date: 2025-09-07T00:00:00.000Z
tags: [undefined]
categories: undefined
---

# åšå®¢ç¼–è¾‘å™¨å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½è®¾ç½®è¯´æ˜

## ä¾èµ–å®‰è£…

é¦–å…ˆå®‰è£…å¿…è¦çš„npmåŒ…ï¼š

```bash
npm install multer
```

å¦‚æœè¿˜æ²¡æœ‰å®‰è£…å…¶ä»–ä¾èµ–ï¼š
```bash
npm install express cors body-parser
```

## åç«¯é›†æˆ

### 1. åˆ›å»ºå›¾ç‰‡ä¸Šä¼ è·¯ç”±æ–‡ä»¶

å°†æä¾›çš„APIä»£ç ä¿å­˜ä¸º `routes/image-upload.js`ï¼ˆæˆ–å…¶ä»–åˆé€‚çš„ä½ç½®ï¼‰

### 2. åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥è·¯ç”±

```javascript
// app.js æˆ– server.js
const express = require(&#39;express&#39;);
const imageRoutes = require(&#39;./routes/image-upload&#39;);

const app = express();

// ä¸­é—´ä»¶
app.use(express.json());
app.use(express.static(&#39;public&#39;)); // ç¡®ä¿é™æ€æ–‡ä»¶æœåŠ¡

// å›¾ç‰‡ä¸Šä¼ APIè·¯ç”±
app.use(&#39;/api&#39;, imageRoutes);

// å…¶ä»–è·¯ç”±...
```

### 3. ç¡®ä¿ç›®å½•ç»“æ„

ç¡®ä¿ä½ çš„é¡¹ç›®æœ‰ä»¥ä¸‹ç›®å½•ç»“æ„ï¼š
```
your-project/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ images/        # å›¾ç‰‡å­˜å‚¨ç›®å½•ï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºå­ç›®å½•ï¼‰
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ image-upload.js
â””â”€â”€ app.js
```

## å‰ç«¯é›†æˆ

### 1. æ›´æ–°ç¼–è¾‘å™¨JavaScript

å°†å¢å¼ºçš„ `editor.js` ä»£ç æ›¿æ¢ä½ ç°æœ‰çš„ç¼–è¾‘å™¨è„šæœ¬ã€‚

### 2. ç¡®ä¿ç¼–è¾‘å™¨é¡µé¢å¼•å…¥äº†å¿…è¦çš„åº“

```html
&lt;script src=&#34;https://cdn.jsdelivr.net/npm/marked@4.2.12/marked.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/js/editor.js&#34;&gt;&lt;/script&gt;
```

## åŠŸèƒ½ç‰¹æ€§

### æ”¯æŒçš„ä¸Šä¼ æ–¹å¼

1. **ç‚¹å‡»ä¸Šä¼ æŒ‰é’®** - é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªå›¾ç‰‡æ–‡ä»¶
2. **æ‹–æ‹½ä¸Šä¼ ** - ç›´æ¥å°†å›¾ç‰‡æ‹–åˆ°ç¼–è¾‘å™¨åŒºåŸŸ
3. **ç²˜è´´ä¸Šä¼ ** - Ctrl+V ç²˜è´´å‰ªè´´æ¿ä¸­çš„å›¾ç‰‡

### å­˜å‚¨è·¯å¾„æ ¼å¼

å›¾ç‰‡ä¼šæŒ‰ç…§ä»¥ä¸‹æ ¼å¼ä¿å­˜ï¼š
```
/images/å¹´/æœˆ/åšå®¢æ ‡é¢˜/å›¾ç‰‡æ–‡ä»¶å
```

ä¾‹å¦‚ï¼š
- åšå®¢æ ‡é¢˜ï¼š`æˆ‘çš„Vueå­¦ä¹ ç¬”è®°`
- ä¸Šä¼ æ—¶é—´ï¼š2024å¹´3æœˆ
- å­˜å‚¨è·¯å¾„ï¼š`/images/2024/03/æˆ‘çš„vueå­¦ä¹ ç¬”è®°/1710123456789-a1b2c3d4.jpg`

### å®‰å…¨ç‰¹æ€§

- **æ–‡ä»¶ç±»å‹éªŒè¯** - åªå…è®¸å›¾ç‰‡æ ¼å¼
- **æ–‡ä»¶å¤§å°é™åˆ¶** - æœ€å¤§10MB
- **è·¯å¾„å®‰å…¨** - é˜²æ­¢ç›®å½•éå†æ”»å‡»
- **æ–‡ä»¶åå®‰å…¨** - è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ã€å®‰å…¨çš„æ–‡ä»¶å
- **èº«ä»½éªŒè¯** - éœ€è¦æœ‰æ•ˆtokenæ‰èƒ½ä¸Šä¼ 

## é…ç½®é€‰é¡¹

### ä¿®æ”¹ä¸Šä¼ é™åˆ¶

```javascript
const upload = multer({
  storage: storage,
  limits: {
    fileSize: 5 * 1024 * 1024, // æ”¹ä¸º5MB
  },
  // ...
});
```

### ä¿®æ”¹å…è®¸çš„æ–‡ä»¶ç±»å‹

```javascript
fileFilter: (req, file, cb) =&gt; {
  const allowedTypes = /jpeg|jpg|png|gif|webp|svg/; // æ·»åŠ svgæ”¯æŒ
  // ...
}
```

### ä¿®æ”¹TokenéªŒè¯

```javascript
// åœ¨å‰ç«¯ editor.js ä¸­
const token = &#39;your-actual-secret-token&#39;; 

// åœ¨åç«¯ image-upload.js ä¸­
if (token !== &#39;your-actual-secret-token&#39;) {
  return res.status(403).json({ error: &#39;æ— æ•ˆçš„è®¿é—®ä»¤ç‰Œ&#39; });
}
```

## ä½¿ç”¨æ–¹æ³•

1. **ç¼–å†™åšå®¢æ—¶**ï¼š
   - å…ˆè¾“å…¥åšå®¢æ ‡é¢˜
   - ç‚¹å‡»&#34;ä¸Šä¼ å›¾ç‰‡&#34;æŒ‰é’®é€‰æ‹©å›¾ç‰‡
   - æˆ–è€…ç›´æ¥æ‹–æ‹½å›¾ç‰‡åˆ°ç¼–è¾‘å™¨
   - æˆ–è€…å¤åˆ¶å›¾ç‰‡ååœ¨ç¼–è¾‘å™¨ä¸­ç²˜è´´

2. **å›¾ç‰‡ä¼šè‡ªåŠ¨æ’å…¥Markdownæ ¼å¼**ï¼š
   ```markdown
   ![å›¾ç‰‡åç§°](/images/2024/03/åšå®¢æ ‡é¢˜/æ–‡ä»¶å.jpg)
   ```

3. **å®æ—¶é¢„è§ˆ**ï¼š
   - å³ä¾§é¢„è§ˆåŒºåŸŸä¼šç«‹å³æ˜¾ç¤ºä¸Šä¼ çš„å›¾ç‰‡

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ä¸Šä¼ å¤±è´¥**ï¼š
   - æ£€æŸ¥æ–‡ä»¶å¤§å°æ˜¯å¦è¶…è¿‡é™åˆ¶
   - ç¡®è®¤æ–‡ä»¶ç±»å‹æ˜¯å¦æ”¯æŒ
   - éªŒè¯tokenæ˜¯å¦æ­£ç¡®

2. **å›¾ç‰‡æ˜¾ç¤ºä¸å‡ºæ¥**ï¼š
   - ç¡®è®¤ `public` ç›®å½•çš„é™æ€æ–‡ä»¶æœåŠ¡å·²é…ç½®
   - æ£€æŸ¥å›¾ç‰‡æ–‡ä»¶æ˜¯å¦æˆåŠŸä¿å­˜
   - ç¡®è®¤è·¯å¾„æ ¼å¼æ­£ç¡®

3. **æƒé™é”™è¯¯**ï¼š
   - ç¡®ä¿Node.jsè¿›ç¨‹æœ‰å†™å…¥ `public/images` ç›®å½•çš„æƒé™
   - åœ¨Linux/Macä¸Šå¯èƒ½éœ€è¦ï¼š`chmod 755 public/images`

## APIæ¥å£è¯´æ˜

### ä¸Šä¼ å•å¼ å›¾ç‰‡
```http
POST /api/upload-image
Authorization: Bearer your-token
Content-Type: multipart/form-data

FormData:
- image: å›¾ç‰‡æ–‡ä»¶
- blogTitle: åšå®¢æ ‡é¢˜
```

### æ‰¹é‡ä¸Šä¼ å›¾ç‰‡
```http
POST /api/upload-images
Authorization: Bearer your-token
Content-Type: multipart/form-data

FormData:
- images: å›¾ç‰‡æ–‡ä»¶æ•°ç»„ï¼ˆæœ€å¤š10ä¸ªï¼‰
- blogTitle: åšå®¢æ ‡é¢˜
```

### åˆ é™¤å›¾ç‰‡
```http
DELETE /api/delete-image
Authorization: Bearer your-token
Content-Type: application/json

{
  &#34;imagePath&#34;: &#34;images/2024/03/blog-title/filename.jpg&#34;
}
```
</textarea>
        </div>
      </div>

      <!-- é¢„è§ˆåŒº -->
      <div class="post-preview" id="post-preview" style="display: none;">
        <div class="preview-header">
          <h3>é¢„è§ˆ</h3>
          <button type="button" class="btn-refresh-preview" id="refresh-preview">ğŸ”„ åˆ·æ–°</button>
        </div>
        <div class="preview-content" id="preview-content">
          <!-- é¢„è§ˆå†…å®¹å°†é€šè¿‡JSæ¸²æŸ“ -->
        </div>
      </div>
    </section>
  </main>

  <!-- å›¾ç‰‡ä¸Šä¼ æ¨¡æ€æ¡† -->
  <div class="modal" id="image-modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h4>æ’å…¥å›¾ç‰‡</h4>
        <button type="button" class="btn-close" onclick="closeImageModal()">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="upload-tabs">
          <button type="button" class="tab-btn active" data-tab="upload">ä¸Šä¼ å›¾ç‰‡</button>
          <button type="button" class="tab-btn" data-tab="url">å›¾ç‰‡é“¾æ¥</button>
        </div>
        
        <div class="tab-content" id="upload-tab">
          <div class="upload-zone" id="upload-zone">
            <div class="upload-placeholder">
              <div class="upload-icon">ğŸ“</div>
              <p>æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œæˆ–ç‚¹å‡»é€‰æ‹©</p>
              <small>æ”¯æŒ JPG, PNG, GIF, WebP æ ¼å¼ï¼Œæœ€å¤§ 5MB</small>
            </div>
          </div>
          <div class="uploaded-images" id="uploaded-images"></div>
        </div>
        
        <div class="tab-content" id="url-tab" style="display: none;">
          <div class="form-group">
            <label for="image-url">å›¾ç‰‡é“¾æ¥</label>
            <input type="url" id="image-url" placeholder="https://example.com/image.jpg">
          </div>
          <div class="form-group">
            <label for="image-alt">æ›¿ä»£æ–‡æœ¬</label>
            <input type="text" id="image-alt" placeholder="å›¾ç‰‡æè¿°ï¼ˆå¯é€‰ï¼‰">
          </div>
          <button type="button" class="btn btn-primary" onclick="insertImageUrl()">æ’å…¥</button>
        </div>
      </div>
    </div>
  </div>

  <!-- é“¾æ¥æ’å…¥æ¨¡æ€æ¡† -->
  <div class="modal" id="link-modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h4>æ’å…¥é“¾æ¥</h4>
        <button type="button" class="btn-close" onclick="closeLinkModal()">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="link-text">é“¾æ¥æ–‡æœ¬</label>
          <input type="text" id="link-text" placeholder="æ˜¾ç¤ºçš„æ–‡æœ¬">
        </div>
        <div class="form-group">
          <label for="link-url">é“¾æ¥åœ°å€</label>
          <input type="url" id="link-url" placeholder="https://example.com">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeLinkModal()">å–æ¶ˆ</button>
        <button type="button" class="btn btn-primary" onclick="insertLink()">æ’å…¥</button>
      </div>
    </div>
  </div>

  <hr>
<footer>
  <p>Â© 2025 xiahui010421 | Powered by XiaHui</p>
</footer>

  <script src="/js/post.js"></script>
</body>
</html>