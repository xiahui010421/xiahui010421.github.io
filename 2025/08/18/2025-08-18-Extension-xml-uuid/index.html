<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Extension-xml-uuid - xiahuibb&#39;s blog</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/post.css">
<meta name="generator" content="Hexo 7.3.0"></head>
<body class="post-page">
  <link rel="stylesheet" href="/css/header.css" />
<link rel="stylesheet" href="/css/down.css" />

<!-- <header class="site-header"> -->
<header class="header">
  <div class="header-container">
    <div class="header-left">
      <img src="/images/æ·˜å®åº—é“ºå¿§å¿§ç´ æåº“ (981).gif" alt="Logo" class="header-logo" />
  <span class="header-title">xiahuibb&#39;s blog</span>
   </div>
    <!-- ä¸­é—´çš„ç®­å¤´æŒ‰é’® -->
    <div class="header-center">
      <button id="dropdown-toggle" aria-haspopup="true" aria-expanded="false" aria-controls="dropdown-content" class="dropdown-btn" aria-label="Toggle dropdown">
      <svg viewBox="0 0 64 64" width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="sun-icon">
        <g class="sun-rays">
          <line x1="32" y1="4" x2="32" y2="14" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
          <line x1="32" y1="50" x2="32" y2="60" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
          <line x1="4" y1="32" x2="14" y2="32" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
          <line x1="50" y1="32" x2="60" y2="32" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
          <line x1="12" y1="12" x2="19" y2="19" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
          <line x1="45" y1="45" x2="52" y2="52" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
          <line x1="12" y1="52" x2="19" y2="45" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
          <line x1="45" y1="19" x2="52" y2="12" stroke="#FFB800" stroke-width="3" stroke-linecap="round"/>
        </g>
        <circle cx="32" cy="32" r="12" fill="#FFD93B" stroke="#FFB800" stroke-width="3"/>
      </svg>
    </button>

    </div>

    <nav class="header-nav">
      <ul class="header-menu">
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/archives">Archives</a></li>
        
          <li><a href="/editor">Editor</a></li>
        
      </ul>
    </nav>
  </div>
</header>
<!-- ä¸‹æ‹‰å†…å®¹æ”¾åœ¨ header å¤–ï¼Œé¿å…è¢« header å›ºå®šé«˜åº¦é™åˆ¶ -->
<div id="dropdown-content" class="dropdown-content" aria-hidden="true" >
  <div class="dropdown-inner">
      <div id="calendar"></div>
  </div>
</div>

<!-- Blog æ—¥æœŸ JSON æ•°æ® -->
<script id="blogDates" type="application/json">
  ["2025-06-25","2025-06-26","2025-07-01","2025-07-02","2025-07-03","2025-08-18","2025-08-18","2025-08-25","2025-08-26","2025-08-31","2025-09-03","2025-09-06","2025-09-07","2025-09-06","2025-09-06","2025-09-07","2025-09-07","2025-06-25"]
</script>
  <script>
    const blogDates = JSON.parse(document.getElementById('blogDates').textContent);
    console.log('åšå®¢æ–‡ç« æ—¥æœŸ:', blogDates);
  </script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
  const toggleBtn = document.getElementById('dropdown-toggle');
  const dropdownContent = document.getElementById('dropdown-content');
  const sunRays = toggleBtn.querySelector('.sun-rays');

  let isExpanded = false;

  toggleBtn.addEventListener('click', () => {
    if (isExpanded) {
      // æ’­æ”¾å¤ªé˜³æ”¶èµ·åŠ¨ç”»
      sunRays.style.animation = 'rays-collapse 0.4s forwards ease-in';

      // å…ˆå°† max-height è®¾ç½®ä¸ºå½“å‰å†…å®¹é«˜åº¦ï¼Œç¡®ä¿è¿‡æ¸¡ä»æ­£ç¡®é«˜åº¦å¼€å§‹
      dropdownContent.style.maxHeight = dropdownContent.scrollHeight + 'px';

      // è§¦å‘é‡ç»˜ï¼Œç¡®ä¿æµè§ˆå™¨è¯†åˆ«æ–°çš„ max-height
      dropdownContent.offsetHeight;

      // å»¶è¿Ÿè®¾ç½® max-height ä¸º0ï¼Œè§¦å‘è¿‡æ¸¡åŠ¨ç”»
      setTimeout(() => {
        dropdownContent.style.maxHeight = '0';
        dropdownContent.style.opacity = '0';
        dropdownContent.style.pointerEvents = 'none';
      }, 20); // 20ms çš„å»¶è¿Ÿè¶³å¤Ÿè§¦å‘åŠ¨ç”»

      toggleBtn.classList.remove('active');
      toggleBtn.setAttribute('aria-expanded', 'false');
      dropdownContent.setAttribute('aria-hidden', 'true');
      isExpanded = false;

    } else {
      // æ’­æ”¾å¤ªé˜³å±•å¼€åŠ¨ç”»
      sunRays.style.animation = 'rays-expand 0.4s forwards ease-out';

      dropdownContent.style.opacity = '1';
      dropdownContent.style.pointerEvents = 'auto';

      // ç›´æ¥è®¾ç½® max-height ä¸ºå†…å®¹é«˜åº¦ï¼Œè§¦å‘å±•å¼€åŠ¨ç”»
      dropdownContent.style.maxHeight = dropdownContent.scrollHeight + 'px';

      toggleBtn.classList.add('active');
      toggleBtn.setAttribute('aria-expanded', 'true');
      dropdownContent.setAttribute('aria-hidden', 'false');
      isExpanded = true;
    }
  });

  // ç‚¹å‡»å¤–éƒ¨å…³é—­ä¸‹æ‹‰æ¡†
  document.addEventListener('click', (e) => {
    if (!toggleBtn.contains(e.target) && !dropdownContent.contains(e.target) && isExpanded) {
      sunRays.style.animation = 'rays-collapse 0.4s forwards ease-in';

      dropdownContent.style.maxHeight = dropdownContent.scrollHeight + 'px';
      dropdownContent.offsetHeight;

      setTimeout(() => {
        dropdownContent.style.maxHeight = '0';
        dropdownContent.style.opacity = '0';
        dropdownContent.style.pointerEvents = 'none';
      }, 20);

      toggleBtn.classList.remove('active');
      toggleBtn.setAttribute('aria-expanded', 'false');
      dropdownContent.setAttribute('aria-hidden', 'true');
      isExpanded = false;
    }
  });

  sunRays.addEventListener('animationend', (e) => {
    if (e.animationName === 'rays-collapse') {
      sunRays.style.animation = '';
      sunRays.style.transform = 'scale(0)';
      sunRays.style.opacity = '0';
    } else if (e.animationName === 'rays-expand') {
      sunRays.style.animation = '';
      sunRays.style.transform = 'scale(1)';
      sunRays.style.opacity = '1';
    }
  });
});




// ...existing code...

let currentYear, currentMonth;

function renderCalendar(year, month, highlightDates) {
  currentYear = year;
  currentMonth = month;
  const calendarEl = document.getElementById('calendar');
  calendarEl.innerHTML = ''; // æ¸…ç©º

  // æ—¥å†å¤´éƒ¨
  const headerDiv = document.createElement('div');
  headerDiv.className = 'calendar-header';
  headerDiv.style.display = 'flex';
  headerDiv.style.justifyContent = 'center';
  headerDiv.style.alignItems = 'center';
  headerDiv.style.marginBottom = '8px';
  headerDiv.innerHTML = `
    <button class="calendar-btn" id="prev-year" title="ä¸Šä¸€å¹´">&laquo;</button>
    <button class="calendar-btn" id="prev-month" title="ä¸Šä¸€æœˆ">&lsaquo;</button>
    <span class="calendar-title" style="margin: 0 12px; font-weight: bold;">
      ${year}å¹´${month + 1}æœˆ
    </span>
    <button class="calendar-btn" id="next-month" title="ä¸‹ä¸€æœˆ">&rsaquo;</button>
    <button class="calendar-btn" id="next-year" title="ä¸‹ä¸€å¹´">&raquo;</button>
  `;
  calendarEl.appendChild(headerDiv);

  // ...åŸæœ‰è¡¨æ ¼ç”Ÿæˆä»£ç ...
  const daysOfWeek = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
  const firstDay = new Date(year, month, 1);
  const lastDay = new Date(year, month + 1, 0);
  const firstWeekDay = firstDay.getDay();
  const totalDays = lastDay.getDate();

  const table = document.createElement('table');
  table.className = 'calendar-table';

  const thead = document.createElement('thead');
  const headerRow = document.createElement('tr');
  daysOfWeek.forEach(d => {
    const th = document.createElement('th');
    th.textContent = d;
    headerRow.appendChild(th);
  });
  thead.appendChild(headerRow);
  table.appendChild(thead);

  const tbody = document.createElement('tbody');
  let row = document.createElement('tr');
  for (let i = 0; i < firstWeekDay; i++) {
    row.appendChild(document.createElement('td'));
  }
  for (let day = 1; day <= totalDays; day++) {
    if (row.children.length % 7 === 0) {
      tbody.appendChild(row);
      row = document.createElement('tr');
    }
    const td = document.createElement('td');
    td.textContent = day;
    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
    if (highlightDates.includes(dateStr)) {
      td.classList.add('highlight');
    }
    row.appendChild(td);
  }
  while (row.children.length < 7) {
    row.appendChild(document.createElement('td'));
  }
  tbody.appendChild(row);
  table.appendChild(tbody);
  calendarEl.appendChild(table);

  // äº‹ä»¶ç»‘å®š
  document.getElementById('prev-year').onclick = () => renderCalendar(year - 1, month, highlightDates);
  document.getElementById('next-year').onclick = () => renderCalendar(year + 1, month, highlightDates);
  document.getElementById('prev-month').onclick = () => {
    if (month === 0) {
      renderCalendar(year - 1, 11, highlightDates);
    } else {
      renderCalendar(year, month - 1, highlightDates);
    }
  };
  document.getElementById('next-month').onclick = () => {
    if (month === 11) {
      renderCalendar(year + 1, 0, highlightDates);
    } else {
      renderCalendar(year, month + 1, highlightDates);
    }
  };
}

// é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', () => {
  const now = new Date();
  renderCalendar(now.getFullYear(), now.getMonth(), blogDates);
  document.querySelector('.dropdown-inner').addEventListener('click', function(e) {
    e.stopPropagation();
  });
});

</script>

  
  <!-- ç¼–è¾‘æ¨¡å¼åˆ‡æ¢æŒ‰é’® -->
  <div class="post-controls">
    <button id="toggle-edit" class="btn-edit-toggle" title="åˆ‡æ¢ç¼–è¾‘æ¨¡å¼">
      <span class="edit-icon">âœï¸</span>
      <span class="edit-text">ç¼–è¾‘</span>
    </button>
    <button id="save-post" class="btn-save-post" style="display: none;" title="ä¿å­˜æ–‡ç« ">
      <span class="save-icon">ğŸ’¾</span>
      <span class="save-text">ä¿å­˜</span>
    </button>
  </div>

  <main class="container">
    <aside class="toc">
      <div class="toc-content">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#XML-UUID-Hover-%E6%8F%92%E4%BB%B6%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97%EF%BC%88%E6%B8%85%E6%99%B0%E7%89%88%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">XML UUID Hover æ’ä»¶æ“ä½œæŒ‡å—ï¼ˆæ¸…æ™°ç‰ˆï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3-%E5%87%86%E5%A4%87%E7%8E%AF%E5%A2%83"><span class="toc-number">1.1.</span> <span class="toc-text">1ï¸âƒ£ å‡†å¤‡ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3-%E5%AE%89%E8%A3%85-VS-Code-%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7"><span class="toc-number">1.2.</span> <span class="toc-text">2ï¸âƒ£ å®‰è£… VS Code æ’ä»¶å¼€å‘å·¥å…·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%EF%B8%8F%E2%83%A3-%E5%88%9B%E5%BB%BA%E6%8F%92%E4%BB%B6%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.3.</span> <span class="toc-text">3ï¸âƒ£ åˆ›å»ºæ’ä»¶å·¥ç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%EF%B8%8F%E2%83%A3-%E5%AE%89%E8%A3%85-CSV-%E8%A7%A3%E6%9E%90%E5%BA%93"><span class="toc-number">1.4.</span> <span class="toc-text">4ï¸âƒ£ å®‰è£… CSV è§£æåº“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%EF%B8%8F%E2%83%A3-%E5%88%9B%E5%BB%BA-CSV-%E6%96%87%E4%BB%B6"><span class="toc-number">1.5.</span> <span class="toc-text">5ï¸âƒ£ åˆ›å»º CSV æ–‡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%EF%B8%8F%E2%83%A3-%E4%BF%AE%E6%94%B9-package-json"><span class="toc-number">1.6.</span> <span class="toc-text">6ï¸âƒ£ ä¿®æ”¹ package.json</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-activationEvents"><span class="toc-number">1.6.1.</span> <span class="toc-text">1. activationEvents</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-contributes"><span class="toc-number">1.6.2.</span> <span class="toc-text">2. contributes</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%EF%B8%8F%E2%83%A3-%E6%9B%BF%E6%8D%A2-src-extension-ts"><span class="toc-number">1.7.</span> <span class="toc-text">7ï¸âƒ£ æ›¿æ¢ src&#x2F;extension.ts</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%EF%B8%8F%E2%83%A3-%E8%BF%90%E8%A1%8C%E6%8F%92%E4%BB%B6"><span class="toc-number">1.8.</span> <span class="toc-text">8ï¸âƒ£ è¿è¡Œæ’ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9%EF%B8%8F%E2%83%A3-%E6%89%93%E5%8C%85%E6%8F%92%E4%BB%B6"><span class="toc-number">1.9.</span> <span class="toc-text">9ï¸âƒ£ æ‰“åŒ…æ’ä»¶</span></a></li></ol></li></ol>
      </div>
    </aside>
    
    <section class="content">
      <!-- æ–‡ç« å…ƒä¿¡æ¯ç¼–è¾‘åŒº -->
      <div class="post-meta-edit" id="post-meta-edit" style="display: none;">
        <div class="meta-grid">
          <div class="meta-item">
            <label for="edit-title">æ ‡é¢˜</label>
            <input type="text" id="edit-title" value="Extension-xml-uuid" placeholder="æ–‡ç« æ ‡é¢˜">
          </div>
          
          <div class="meta-item">
            <label for="edit-date">å‘å¸ƒæ—¥æœŸ</label>
            <input type="datetime-local" id="edit-date" value="2025-08-18T05:35">
          </div>
          
          <div class="meta-item">
            <label for="edit-categories">åˆ†ç±»</label>
            <input type="text" id="edit-categories" value="å¼€å‘å·¥å…·, æŠ€æœ¯æ•™ç¨‹" placeholder="åˆ†ç±»1, åˆ†ç±»2...">
          </div>
          
          <div class="meta-item">
            <label for="edit-tags">æ ‡ç­¾</label>
            <input type="text" id="edit-tags" value="VS Codeæ’ä»¶, TypeScript, XML, UUID, æ’ä»¶å¼€å‘, CSVè§£æ, å¼€å‘å·¥å…·" placeholder="æ ‡ç­¾1, æ ‡ç­¾2...">
          </div>
          
          <div class="meta-item meta-item-full">
            <label for="edit-thumbnail">ç¼©ç•¥å›¾</label>
            <input type="text" id="edit-thumbnail" value="" placeholder="å›¾ç‰‡URLï¼ˆå¯é€‰ï¼‰">
          </div>
        </div>
      </div>

      <!-- ç¼–è¾‘å·¥å…·æ  -->
      <div class="edit-toolbar" id="edit-toolbar" style="display: none;">
        <div class="toolbar-group">
          <button type="button" class="toolbar-btn" data-action="bold" title="ç²—ä½“ (Ctrl+B)">
            <strong>B</strong>
          </button>
          <button type="button" class="toolbar-btn" data-action="italic" title="æ–œä½“ (Ctrl+I)">
            <em>I</em>
          </button>
          <button type="button" class="toolbar-btn" data-action="code" title="è¡Œå†…ä»£ç ">
            &lt;/&gt;
          </button>
        </div>
        
        <div class="toolbar-group">
          <button type="button" class="toolbar-btn" data-action="heading1" title="æ ‡é¢˜1">H1</button>
          <button type="button" class="toolbar-btn" data-action="heading2" title="æ ‡é¢˜2">H2</button>
          <button type="button" class="toolbar-btn" data-action="heading3" title="æ ‡é¢˜3">H3</button>
        </div>
        
        <div class="toolbar-group">
          <button type="button" class="toolbar-btn" data-action="link" title="æ’å…¥é“¾æ¥">ğŸ”—</button>
          <button type="button" class="toolbar-btn" data-action="image" title="æ’å…¥å›¾ç‰‡">ğŸ–¼ï¸</button>
          <input type="file" id="image-upload" accept="image/*" style="display: none;" multiple>
        </div>
        
        <div class="toolbar-group">
          <button type="button" class="toolbar-btn" data-action="quote" title="å¼•ç”¨">â</button>
          <button type="button" class="toolbar-btn" data-action="list" title="åˆ—è¡¨">â€¢</button>
          <button type="button" class="toolbar-btn" data-action="codeblock" title="ä»£ç å—">{ }</button>
        </div>
        
        <div class="toolbar-group">
          <button type="button" class="toolbar-btn toggle-preview" data-action="preview" title="é¢„è§ˆ">ğŸ‘ï¸</button>
        </div>
      </div>

      <!-- æ–‡ç« å†…å®¹æ˜¾ç¤ºåŒº -->
      <article class="post-content" id="post-content">
        <h1 id="XML-UUID-Hover-æ’ä»¶æ“ä½œæŒ‡å—ï¼ˆæ¸…æ™°ç‰ˆï¼‰"><a href="#XML-UUID-Hover-æ’ä»¶æ“ä½œæŒ‡å—ï¼ˆæ¸…æ™°ç‰ˆï¼‰" class="headerlink" title="XML UUID Hover æ’ä»¶æ“ä½œæŒ‡å—ï¼ˆæ¸…æ™°ç‰ˆï¼‰"></a>XML UUID Hover æ’ä»¶æ“ä½œæŒ‡å—ï¼ˆæ¸…æ™°ç‰ˆï¼‰</h1><h2 id="1ï¸âƒ£-å‡†å¤‡ç¯å¢ƒ"><a href="#1ï¸âƒ£-å‡†å¤‡ç¯å¢ƒ" class="headerlink" title="1ï¸âƒ£ å‡†å¤‡ç¯å¢ƒ"></a>1ï¸âƒ£ å‡†å¤‡ç¯å¢ƒ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ Node.js å’Œ npm ç‰ˆæœ¬</span></span><br><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure>

<p>ç¡®ä¿ Node.js &gt;&#x3D;18ã€npm å¯ç”¨ã€‚</p>
<hr>
<h2 id="2ï¸âƒ£-å®‰è£…-VS-Code-æ’ä»¶å¼€å‘å·¥å…·"><a href="#2ï¸âƒ£-å®‰è£…-VS-Code-æ’ä»¶å¼€å‘å·¥å…·" class="headerlink" title="2ï¸âƒ£ å®‰è£… VS Code æ’ä»¶å¼€å‘å·¥å…·"></a>2ï¸âƒ£ å®‰è£… VS Code æ’ä»¶å¼€å‘å·¥å…·</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g yo generator-code</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚æœæŠ¥æƒé™é”™è¯¯ï¼Œè¯·åŠ  <code>sudo</code>ï¼š<code>sudo npm i -g yo generator-code</code></p>
</blockquote>
<hr>
<h2 id="3ï¸âƒ£-åˆ›å»ºæ’ä»¶å·¥ç¨‹"><a href="#3ï¸âƒ£-åˆ›å»ºæ’ä»¶å·¥ç¨‹" class="headerlink" title="3ï¸âƒ£ åˆ›å»ºæ’ä»¶å·¥ç¨‹"></a>3ï¸âƒ£ åˆ›å»ºæ’ä»¶å·¥ç¨‹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yo code</span><br></pre></td></tr></table></figure>

<ul>
<li>é€‰æ‹© <strong>New Extension (TypeScript)</strong></li>
<li>Extension nameï¼š<code>xml-uuid-hover</code></li>
<li>å…¶ä»–é€‰é¡¹ä¸€è·¯å›è½¦ï¼ˆé»˜è®¤å³å¯ï¼‰</li>
</ul>
<p>è¿›å…¥å·¥ç¨‹ç›®å½•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> xml-uuid-hover</span><br></pre></td></tr></table></figure>

<p>å®‰è£…ä¾èµ–ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4ï¸âƒ£-å®‰è£…-CSV-è§£æåº“"><a href="#4ï¸âƒ£-å®‰è£…-CSV-è§£æåº“" class="headerlink" title="4ï¸âƒ£ å®‰è£… CSV è§£æåº“"></a>4ï¸âƒ£ å®‰è£… CSV è§£æåº“</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i csv-parse</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5ï¸âƒ£-åˆ›å»º-CSV-æ–‡ä»¶"><a href="#5ï¸âƒ£-åˆ›å»º-CSV-æ–‡ä»¶" class="headerlink" title="5ï¸âƒ£ åˆ›å»º CSV æ–‡ä»¶"></a>5ï¸âƒ£ åˆ›å»º CSV æ–‡ä»¶</h2><p>åœ¨å·¥ç¨‹æ ¹ç›®å½•æ–°å»º <code>translations.csv</code>ï¼Œç¤ºä¾‹å†…å®¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UUID,English,Chinese</span><br><span class="line">00000001,open,æ‰“å¼€</span><br><span class="line">00000002,close,å…³é—­</span><br><span class="line">00000003,start,å¼€å§‹</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="6ï¸âƒ£-ä¿®æ”¹-package-json"><a href="#6ï¸âƒ£-ä¿®æ”¹-package-json" class="headerlink" title="6ï¸âƒ£ ä¿®æ”¹ package.json"></a>6ï¸âƒ£ ä¿®æ”¹ <code>package.json</code></h2><h3 id="1-activationEvents"><a href="#1-activationEvents" class="headerlink" title="1. activationEvents"></a>1. activationEvents</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;activationEvents&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="string">&quot;onLanguage:xml&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;onCommand:xml-uuid-hover.reloadTranslations&quot;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<h3 id="2-contributes"><a href="#2-contributes" class="headerlink" title="2. contributes"></a>2. contributes</h3><figure class="highlight jsonc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;configuration&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;XML UUID Hover&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;xmlUuidHover.csvPath&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;default&quot;</span><span class="punctuation">:</span> <span class="string">&quot;translations.csv&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CSV æ–‡ä»¶è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹å·¥ä½œåŒºæ ¹ç›®å½•ï¼‰&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;commands&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xml-uuid-hover.reloadTranslations&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;XML UUID Hover: é‡æ–°åŠ è½½ç¿»è¯‘ CSV&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="7ï¸âƒ£-æ›¿æ¢-src-extension-ts"><a href="#7ï¸âƒ£-æ›¿æ¢-src-extension-ts" class="headerlink" title="7ï¸âƒ£ æ›¿æ¢ src/extension.ts"></a>7ï¸âƒ£ æ›¿æ¢ <code>src/extension.ts</code></h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> vscode <span class="keyword">from</span> <span class="string">&quot;vscode&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> fs <span class="keyword">from</span> <span class="string">&quot;fs&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> path <span class="keyword">from</span> <span class="string">&quot;path&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; parse &#125; <span class="keyword">from</span> <span class="string">&quot;csv-parse/sync&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> translationMap = <span class="keyword">new</span> <span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">resolveCsvPath</span>(<span class="params"><span class="attr">userPath</span>: <span class="built_in">string</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!userPath?.<span class="title function_">trim</span>()) <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (path.<span class="title function_">isAbsolute</span>(userPath)) <span class="keyword">return</span> userPath;</span><br><span class="line">    <span class="keyword">const</span> root = vscode.<span class="property">workspace</span>.<span class="property">workspaceFolders</span>?.[<span class="number">0</span>]?.<span class="property">uri</span>.<span class="property">fsPath</span> || <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> path.<span class="title function_">join</span>(root, userPath);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadTranslation</span>(<span class="params"><span class="attr">filePathSetting</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> finalPath = <span class="title function_">resolveCsvPath</span>(filePathSetting);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!finalPath) &#123;</span><br><span class="line">            vscode.<span class="property">window</span>.<span class="title function_">showWarningMessage</span>(<span class="string">&quot;æœªé…ç½® CSV è·¯å¾„ï¼ˆxmlUuidHover.csvPathï¼‰ã€‚&quot;</span>);</span><br><span class="line">            translationMap.<span class="title function_">clear</span>();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!fs.<span class="title function_">existsSync</span>(finalPath)) &#123;</span><br><span class="line">            vscode.<span class="property">window</span>.<span class="title function_">showWarningMessage</span>(<span class="string">`CSV æ–‡ä»¶ä¸å­˜åœ¨ï¼š<span class="subst">$&#123;finalPath&#125;</span>`</span>);</span><br><span class="line">            translationMap.<span class="title function_">clear</span>();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> content = fs.<span class="title function_">readFileSync</span>(finalPath, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="keyword">const</span> <span class="attr">records</span>: <span class="built_in">any</span>[] = <span class="title function_">parse</span>(content, &#123; <span class="attr">columns</span>: <span class="literal">true</span>, <span class="attr">skip_empty_lines</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br><span class="line">        translationMap.<span class="title function_">clear</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> row <span class="keyword">of</span> records) &#123;</span><br><span class="line">            <span class="keyword">const</span> key = <span class="title class_">String</span>(row.<span class="property">UUID</span> || <span class="string">&quot;&quot;</span>).<span class="title function_">trim</span>();</span><br><span class="line">            <span class="keyword">const</span> zh = <span class="title class_">String</span>(row.<span class="property">Chinese</span> || <span class="string">&quot;&quot;</span>).<span class="title function_">trim</span>();</span><br><span class="line">            <span class="keyword">const</span> en = <span class="title class_">String</span>(row.<span class="property">English</span> || <span class="string">&quot;&quot;</span>).<span class="title function_">trim</span>();</span><br><span class="line">            <span class="keyword">if</span> (key) translationMap.<span class="title function_">set</span>(key, zh || en || <span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[xml-uuid-hover] Translation loaded: <span class="subst">$&#123;translationMap.size&#125;</span>`</span>);</span><br><span class="line">        vscode.<span class="property">window</span>.<span class="title function_">setStatusBarMessage</span>(<span class="string">`XML UUID Hover: å·²åŠ è½½ <span class="subst">$&#123;translationMap.size&#125;</span> æ¡ç¿»è¯‘`</span>, <span class="number">2000</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;[xml-uuid-hover] Failed to load CSV:&quot;</span>, e);</span><br><span class="line">        vscode.<span class="property">window</span>.<span class="title function_">showErrorMessage</span>(<span class="string">`åŠ è½½ CSV å¤±è´¥ï¼š<span class="subst">$&#123;<span class="built_in">String</span>((e <span class="keyword">as</span> <span class="built_in">Error</span>).message || e)&#125;</span>`</span>);</span><br><span class="line">        translationMap.<span class="title function_">clear</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params"><span class="attr">context</span>: vscode.<span class="title class_">ExtensionContext</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">getCsvSetting</span> = (<span class="params"></span>) =&gt;</span><br><span class="line">        vscode.<span class="property">workspace</span>.<span class="title function_">getConfiguration</span>(<span class="string">&quot;xmlUuidHover&quot;</span>).<span class="property">get</span>&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;csvPath&quot;</span>) || <span class="string">&quot;translations.csv&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆæ¬¡åŠ è½½</span></span><br><span class="line">    <span class="keyword">let</span> csvPathSetting = <span class="title function_">getCsvSetting</span>();</span><br><span class="line">    <span class="title function_">loadTranslation</span>(csvPathSetting);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Hover Provider</span></span><br><span class="line">    <span class="keyword">const</span> hoverProvider = vscode.<span class="property">languages</span>.<span class="title function_">registerHoverProvider</span>(<span class="string">&quot;xml&quot;</span>, &#123;</span><br><span class="line">        <span class="title function_">provideHover</span>(<span class="params"><span class="variable language_">document</span>, position</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> range = <span class="variable language_">document</span>.<span class="title function_">getWordRangeAtPosition</span>(position, <span class="regexp">/[0-9A-Fa-f]&#123;8,&#125;/</span>);</span><br><span class="line">            <span class="keyword">if</span> (!range) <span class="keyword">return</span>;</span><br><span class="line">            <span class="keyword">const</span> word = <span class="variable language_">document</span>.<span class="title function_">getText</span>(range);</span><br><span class="line">            <span class="keyword">if</span> (translationMap.<span class="title function_">has</span>(word)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> vscode.<span class="title class_">Hover</span>(<span class="string">`ç¿»è¯‘: <span class="subst">$&#123;translationMap.get(word)&#125;</span>`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">    context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(hoverProvider);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰‹åŠ¨åˆ·æ–°å‘½ä»¤</span></span><br><span class="line">    <span class="keyword">const</span> reloadCmd = vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&quot;xml-uuid-hover.reloadTranslations&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        csvPathSetting = <span class="title function_">getCsvSetting</span>();</span><br><span class="line">        <span class="title function_">loadTranslation</span>(csvPathSetting);</span><br><span class="line">        vscode.<span class="property">window</span>.<span class="title function_">showInformationMessage</span>(<span class="string">&quot;ç¿»è¯‘ CSV å·²é‡æ–°åŠ è½½ï¼&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(reloadCmd);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®å˜æ›´æ—¶è‡ªåŠ¨é‡è½½</span></span><br><span class="line">    <span class="keyword">const</span> cfgWatcher = vscode.<span class="property">workspace</span>.<span class="title function_">onDidChangeConfiguration</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (e.<span class="title function_">affectsConfiguration</span>(<span class="string">&quot;xmlUuidHover.csvPath&quot;</span>)) &#123;</span><br><span class="line">            csvPathSetting = <span class="title function_">getCsvSetting</span>();</span><br><span class="line">            <span class="title function_">loadTranslation</span>(csvPathSetting);</span><br><span class="line">            vscode.<span class="property">window</span>.<span class="title function_">showInformationMessage</span>(<span class="string">&quot;ç¿»è¯‘ CSV è·¯å¾„å·²æ›´æ–°å¹¶é‡æ–°åŠ è½½ã€‚&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(cfgWatcher);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">deactivate</span>(<span class="params"></span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="8ï¸âƒ£-è¿è¡Œæ’ä»¶"><a href="#8ï¸âƒ£-è¿è¡Œæ’ä»¶" class="headerlink" title="8ï¸âƒ£ è¿è¡Œæ’ä»¶"></a>8ï¸âƒ£ è¿è¡Œæ’ä»¶</h2><ol>
<li>æ‰“å¼€ VS Code â†’ æ‰“å¼€æ’ä»¶å·¥ç¨‹</li>
<li>æŒ‰ F5 å¯åŠ¨ <strong>Extension Development Host</strong></li>
<li>åœ¨æ–°çª—å£é‡Œæ‰“å¼€ <code>.xml</code> æ–‡ä»¶ï¼Œå†™å…¥ï¼š</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">text</span>=<span class="string">&quot;00000001&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>é¼ æ ‡æ‚¬åœåœ¨ <code>00000001</code> ä¸Šï¼Œä¼šæ˜¾ç¤ºç¿»è¯‘ï¼š<code>ç¿»è¯‘: æ‰“å¼€</code></li>
</ol>
<hr>
<h2 id="9ï¸âƒ£-æ‰“åŒ…æ’ä»¶"><a href="#9ï¸âƒ£-æ‰“åŒ…æ’ä»¶" class="headerlink" title="9ï¸âƒ£ æ‰“åŒ…æ’ä»¶"></a>9ï¸âƒ£ æ‰“åŒ…æ’ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœ¬åœ°å®‰è£… vsceï¼ˆæ¨èï¼‰</span></span><br><span class="line">npm install --save-dev vsce</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“åŒ…</span></span><br><span class="line">npx vsce package</span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆ <code>.vsix</code> æ–‡ä»¶ï¼Œå¯ä»¥åœ¨ VS Code æ‰©å±•é¢æ¿ â†’ â€¦ â†’ Install from VSIX å®‰è£…ã€‚</p>

      </article>

      <!-- ç¼–è¾‘å™¨ -->
      <div class="post-editor" id="post-editor" style="display: none;">
        <div class="editor-container">
          <textarea id="markdown-editor" class="markdown-textarea" placeholder="å¼€å§‹ç¼–è¾‘ä½ çš„æ–‡ç« ...">---
title: Extension-xml-uuid
date: 2025-08-18T13:35:00.000Z
tags: [VS Codeæ’ä»¶, TypeScript, XML, UUID, æ’ä»¶å¼€å‘, CSVè§£æ, å¼€å‘å·¥å…·]
categories: [å¼€å‘å·¥å…·, æŠ€æœ¯æ•™ç¨‹]
---

# XML UUID Hover æ’ä»¶æ“ä½œæŒ‡å—ï¼ˆæ¸…æ™°ç‰ˆï¼‰

## 1ï¸âƒ£ å‡†å¤‡ç¯å¢ƒ

```bash
# æŸ¥çœ‹ Node.js å’Œ npm ç‰ˆæœ¬
node -v
npm -v
```

ç¡®ä¿ Node.js &gt;=18ã€npm å¯ç”¨ã€‚

---

## 2ï¸âƒ£ å®‰è£… VS Code æ’ä»¶å¼€å‘å·¥å…·

```bash
npm i -g yo generator-code
```

&gt; å¦‚æœæŠ¥æƒé™é”™è¯¯ï¼Œè¯·åŠ  `sudo`ï¼š`sudo npm i -g yo generator-code`

---

## 3ï¸âƒ£ åˆ›å»ºæ’ä»¶å·¥ç¨‹

```bash
yo code
```

* é€‰æ‹© **New Extension (TypeScript)**
* Extension nameï¼š`xml-uuid-hover`
* å…¶ä»–é€‰é¡¹ä¸€è·¯å›è½¦ï¼ˆé»˜è®¤å³å¯ï¼‰

è¿›å…¥å·¥ç¨‹ç›®å½•ï¼š

```bash
cd xml-uuid-hover
```

å®‰è£…ä¾èµ–ï¼š

```bash
npm i
```

---

## 4ï¸âƒ£ å®‰è£… CSV è§£æåº“

```bash
npm i csv-parse
```

---

## 5ï¸âƒ£ åˆ›å»º CSV æ–‡ä»¶

åœ¨å·¥ç¨‹æ ¹ç›®å½•æ–°å»º `translations.csv`ï¼Œç¤ºä¾‹å†…å®¹ï¼š

```csv
UUID,English,Chinese
00000001,open,æ‰“å¼€
00000002,close,å…³é—­
00000003,start,å¼€å§‹
```

---

## 6ï¸âƒ£ ä¿®æ”¹ `package.json`

### 1. activationEvents

```json
&#34;activationEvents&#34;: [
  &#34;onLanguage:xml&#34;,
  &#34;onCommand:xml-uuid-hover.reloadTranslations&#34;
],
```

### 2. contributes

```jsonc
&#34;contributes&#34;: {
  &#34;configuration&#34;: {
    &#34;title&#34;: &#34;XML UUID Hover&#34;,
    &#34;properties&#34;: {
      &#34;xmlUuidHover.csvPath&#34;: {
        &#34;type&#34;: &#34;string&#34;,
        &#34;default&#34;: &#34;translations.csv&#34;,
        &#34;description&#34;: &#34;CSV æ–‡ä»¶è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹å·¥ä½œåŒºæ ¹ç›®å½•ï¼‰&#34;
      }
    }
  },
  &#34;commands&#34;: [
    {
      &#34;command&#34;: &#34;xml-uuid-hover.reloadTranslations&#34;,
      &#34;title&#34;: &#34;XML UUID Hover: é‡æ–°åŠ è½½ç¿»è¯‘ CSV&#34;
    }
  ]
}
```

---

## 7ï¸âƒ£ æ›¿æ¢ `src/extension.ts`

```ts
import * as vscode from &#34;vscode&#34;;
import * as fs from &#34;fs&#34;;
import * as path from &#34;path&#34;;
import { parse } from &#34;csv-parse/sync&#34;;

let translationMap = new Map&lt;string, string&gt;();

function resolveCsvPath(userPath: string): string {
    if (!userPath?.trim()) return &#34;&#34;;
    if (path.isAbsolute(userPath)) return userPath;
    const root = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath || &#34;&#34;;
    return path.join(root, userPath);
}

function loadTranslation(filePathSetting: string) {
    try {
        const finalPath = resolveCsvPath(filePathSetting);

        if (!finalPath) {
            vscode.window.showWarningMessage(&#34;æœªé…ç½® CSV è·¯å¾„ï¼ˆxmlUuidHover.csvPathï¼‰ã€‚&#34;);
            translationMap.clear();
            return;
        }
        if (!fs.existsSync(finalPath)) {
            vscode.window.showWarningMessage(`CSV æ–‡ä»¶ä¸å­˜åœ¨ï¼š${finalPath}`);
            translationMap.clear();
            return;
        }

        const content = fs.readFileSync(finalPath, &#34;utf-8&#34;);
        const records: any[] = parse(content, { columns: true, skip_empty_lines: true });

        translationMap.clear();
        for (const row of records) {
            const key = String(row.UUID || &#34;&#34;).trim();
            const zh = String(row.Chinese || &#34;&#34;).trim();
            const en = String(row.English || &#34;&#34;).trim();
            if (key) translationMap.set(key, zh || en || &#34;&#34;);
        }

        console.log(`[xml-uuid-hover] Translation loaded: ${translationMap.size}`);
        vscode.window.setStatusBarMessage(`XML UUID Hover: å·²åŠ è½½ ${translationMap.size} æ¡ç¿»è¯‘`, 2000);
    } catch (e) {
        console.error(&#34;[xml-uuid-hover] Failed to load CSV:&#34;, e);
        vscode.window.showErrorMessage(`åŠ è½½ CSV å¤±è´¥ï¼š${String((e as Error).message || e)}`);
        translationMap.clear();
    }
}

export function activate(context: vscode.ExtensionContext) {
    const getCsvSetting = () =&gt;
        vscode.workspace.getConfiguration(&#34;xmlUuidHover&#34;).get&lt;string&gt;(&#34;csvPath&#34;) || &#34;translations.csv&#34;;

    // åˆæ¬¡åŠ è½½
    let csvPathSetting = getCsvSetting();
    loadTranslation(csvPathSetting);

    // Hover Provider
    const hoverProvider = vscode.languages.registerHoverProvider(&#34;xml&#34;, {
        provideHover(document, position) {
            const range = document.getWordRangeAtPosition(position, /[0-9A-Fa-f]{8,}/);
            if (!range) return;
            const word = document.getText(range);
            if (translationMap.has(word)) {
                return new vscode.Hover(`ç¿»è¯‘: ${translationMap.get(word)}`);
            }
        },
    });
    context.subscriptions.push(hoverProvider);

    // æ‰‹åŠ¨åˆ·æ–°å‘½ä»¤
    const reloadCmd = vscode.commands.registerCommand(&#34;xml-uuid-hover.reloadTranslations&#34;, () =&gt; {
        csvPathSetting = getCsvSetting();
        loadTranslation(csvPathSetting);
        vscode.window.showInformationMessage(&#34;ç¿»è¯‘ CSV å·²é‡æ–°åŠ è½½ï¼&#34;);
    });
    context.subscriptions.push(reloadCmd);

    // è®¾ç½®å˜æ›´æ—¶è‡ªåŠ¨é‡è½½
    const cfgWatcher = vscode.workspace.onDidChangeConfiguration((e) =&gt; {
        if (e.affectsConfiguration(&#34;xmlUuidHover.csvPath&#34;)) {
            csvPathSetting = getCsvSetting();
            loadTranslation(csvPathSetting);
            vscode.window.showInformationMessage(&#34;ç¿»è¯‘ CSV è·¯å¾„å·²æ›´æ–°å¹¶é‡æ–°åŠ è½½ã€‚&#34;);
        }
    });
    context.subscriptions.push(cfgWatcher);
}

export function deactivate() {}
```

---

## 8ï¸âƒ£ è¿è¡Œæ’ä»¶

1. æ‰“å¼€ VS Code â†’ æ‰“å¼€æ’ä»¶å·¥ç¨‹
2. æŒ‰ F5 å¯åŠ¨ **Extension Development Host**
3. åœ¨æ–°çª—å£é‡Œæ‰“å¼€ `.xml` æ–‡ä»¶ï¼Œå†™å…¥ï¼š

```xml
&lt;button text=&#34;00000001&#34;/&gt;
```

4. é¼ æ ‡æ‚¬åœåœ¨ `00000001` ä¸Šï¼Œä¼šæ˜¾ç¤ºç¿»è¯‘ï¼š`ç¿»è¯‘: æ‰“å¼€`

---

## 9ï¸âƒ£ æ‰“åŒ…æ’ä»¶

```bash
# æœ¬åœ°å®‰è£… vsceï¼ˆæ¨èï¼‰
npm install --save-dev vsce

# æ‰“åŒ…
npx vsce package
```

ç”Ÿæˆ `.vsix` æ–‡ä»¶ï¼Œå¯ä»¥åœ¨ VS Code æ‰©å±•é¢æ¿ â†’ â€¦ â†’ Install from VSIX å®‰è£…ã€‚
</textarea>
        </div>
      </div>

      <!-- é¢„è§ˆåŒº -->
      <div class="post-preview" id="post-preview" style="display: none;">
        <div class="preview-header">
          <h3>é¢„è§ˆ</h3>
          <button type="button" class="btn-refresh-preview" id="refresh-preview">ğŸ”„ åˆ·æ–°</button>
        </div>
        <div class="preview-content" id="preview-content">
          <!-- é¢„è§ˆå†…å®¹å°†é€šè¿‡JSæ¸²æŸ“ -->
        </div>
      </div>
    </section>
  </main>

  <!-- å›¾ç‰‡ä¸Šä¼ æ¨¡æ€æ¡† -->
  <div class="modal" id="image-modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h4>æ’å…¥å›¾ç‰‡</h4>
        <button type="button" class="btn-close" onclick="closeImageModal()">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="upload-tabs">
          <button type="button" class="tab-btn active" data-tab="upload">ä¸Šä¼ å›¾ç‰‡</button>
          <button type="button" class="tab-btn" data-tab="url">å›¾ç‰‡é“¾æ¥</button>
        </div>
        
        <div class="tab-content" id="upload-tab">
          <div class="upload-zone" id="upload-zone">
            <div class="upload-placeholder">
              <div class="upload-icon">ğŸ“</div>
              <p>æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œæˆ–ç‚¹å‡»é€‰æ‹©</p>
              <small>æ”¯æŒ JPG, PNG, GIF, WebP æ ¼å¼ï¼Œæœ€å¤§ 5MB</small>
            </div>
          </div>
          <div class="uploaded-images" id="uploaded-images"></div>
        </div>
        
        <div class="tab-content" id="url-tab" style="display: none;">
          <div class="form-group">
            <label for="image-url">å›¾ç‰‡é“¾æ¥</label>
            <input type="url" id="image-url" placeholder="https://example.com/image.jpg">
          </div>
          <div class="form-group">
            <label for="image-alt">æ›¿ä»£æ–‡æœ¬</label>
            <input type="text" id="image-alt" placeholder="å›¾ç‰‡æè¿°ï¼ˆå¯é€‰ï¼‰">
          </div>
          <button type="button" class="btn btn-primary" onclick="insertImageUrl()">æ’å…¥</button>
        </div>
      </div>
    </div>
  </div>

  <!-- é“¾æ¥æ’å…¥æ¨¡æ€æ¡† -->
  <div class="modal" id="link-modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h4>æ’å…¥é“¾æ¥</h4>
        <button type="button" class="btn-close" onclick="closeLinkModal()">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="link-text">é“¾æ¥æ–‡æœ¬</label>
          <input type="text" id="link-text" placeholder="æ˜¾ç¤ºçš„æ–‡æœ¬">
        </div>
        <div class="form-group">
          <label for="link-url">é“¾æ¥åœ°å€</label>
          <input type="url" id="link-url" placeholder="https://example.com">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeLinkModal()">å–æ¶ˆ</button>
        <button type="button" class="btn btn-primary" onclick="insertLink()">æ’å…¥</button>
      </div>
    </div>
  </div>

  <hr>
<footer>
  <p>Â© 2025 xiahui010421 | Powered by XiaHui</p>
</footer>

  <script src="/js/post.js"></script>
</body>
</html>